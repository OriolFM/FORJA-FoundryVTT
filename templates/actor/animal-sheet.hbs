{{!-- Minimal sheet for Animals --}}
<section class="forja-animal-sheet">
  {{!-- Header: name, species (default animal), size, constitution --}}
  <div class="forja-animal-header">
    <img src="{{document.img}}" alt="{{document.name}}" class="forja-animal-header__img" data-edit="img" />
    <div class="forja-animal-header__info">
      <input type="text" name="name" value="{{document.name}}" class="forja-animal-header__name"
             placeholder="{{localize 'FORJA.CharacterName'}}" />
      <div class="forja-animal-header__selectors">
        <div class="forja-field">
          <label>{{localize "FORJA.Species.label"}}</label>
          <select name="system.species">
            {{#each cfg.species as |label key|}}
              <option value="{{key}}" {{#if (eq key ../system.species)}}selected{{/if}}>
                {{localize label}}
              </option>
            {{/each}}
          </select>
        </div>
        <div class="forja-field">
          <label>{{localize "FORJA.Size.label"}}</label>
          <select name="system.size">
            {{#each cfg.sizes as |label key|}}
              <option value="{{key}}" {{#if (eq key ../system.size)}}selected{{/if}}>
                {{localize label}}
              </option>
            {{/each}}
          </select>
        </div>
        <div class="forja-field">
          <label>{{localize "FORJA.Constitution.label"}}</label>
          <select name="system.constitution">
            {{#each cfg.constitutions as |label key|}}
              <option value="{{key}}" {{#if (eq key ../system.constitution)}}selected{{/if}}>
                {{localize label}}
              </option>
            {{/each}}
          </select>
        </div>
      </div>
    </div>
  </div>

  {{!-- Attributes --}}
  <div class="forja-animal-section">
    <h3 class="forja-section-heading">{{localize "FORJA.Tabs.Attributes"}}</h3>
    <div class="forja-attributes__grid forja-attributes__grid--compact">
      {{#each cfg.attributes as |label key|}}
        <div class="forja-attribute">
          <span class="forja-attribute__label">{{localize label}}</span>
          <input type="number" name="system.attributes.{{key}}.value"
                 value="{{lookup (lookup ../system.attributes key) 'value'}}"
                 class="forja-attribute__input" min="0" max="5" />
          <button type="button" class="forja-attribute__roll" data-action="rollAttribute" data-attribute="{{key}}"
                  title="{{localize 'FORJA.Roll'}} {{localize label}}">
            <i class="fas fa-dice-d10"></i>
          </button>
        </div>
      {{/each}}
    </div>
  </div>

  {{!-- Derived stats (compact) --}}
  <div class="forja-animal-section">
    <div class="forja-derived forja-derived--compact">
      <div class="forja-derived__stat">
        <span class="forja-derived__label">{{localize "FORJA.Derived.Defense"}}</span>
        <span class="forja-derived__value">{{system.defense}}</span>
      </div>
      <div class="forja-derived__stat">
        <span class="forja-derived__label">{{localize "FORJA.Derived.Latency"}}</span>
        <span class="forja-derived__value">{{system.latency}}</span>
      </div>
      <div class="forja-derived__stat">
        <span class="forja-derived__label">{{localize "FORJA.Derived.DamageReduction"}}</span>
        <span class="forja-derived__value">{{system.damageReduction}}</span>
      </div>
      <div class="forja-derived__stat">
        <span class="forja-derived__label">{{localize "FORJA.Derived.Reaction"}}</span>
        <span class="forja-derived__value">{{system.reaction}}</span>
      </div>
      <div class="forja-derived__stat">
        <span class="forja-derived__label">{{localize "FORJA.Derived.Protection"}}</span>
        <span class="forja-derived__value">{{system.protection}}</span>
      </div>
    </div>
  </div>

  {{!-- Basic skills --}}
  {{#if skills.length}}
    <div class="forja-animal-section">
      <h3 class="forja-section-heading">{{localize "FORJA.Tabs.Skills"}}</h3>
      <ul class="forja-skills__list forja-skills__list--compact">
        {{#each skills}}
          <li class="forja-skills__item" data-item-id="{{this.id}}">
            <span class="forja-skills__name">{{this.name}}</span>
            <input type="number" name="items.{{this.id}}.system.level" value="{{this.system.level}}"
                   class="forja-skills__level" min="0" max="{{this.system.maxLevel}}" />
            <button type="button" class="forja-skills__roll" data-action="rollSkill"
                    title="{{localize 'FORJA.Roll'}} {{this.name}}">
              <i class="fas fa-dice-d10"></i>
            </button>
          </li>
        {{/each}}
      </ul>
    </div>
  {{/if}}

  {{!-- Traits --}}
  {{#if traits.length}}
    <div class="forja-animal-section">
      <h3 class="forja-section-heading">{{localize "FORJA.Tabs.Traits"}}</h3>
      <ul class="forja-traits__list forja-traits__list--compact">
        {{#each traits}}
          <li class="forja-traits__item" data-item-id="{{this.id}}">
            <span class="forja-traits__name">{{this.name}}</span>
            {{#if this.system.isParametric}}
              <span class="forja-traits__level-display">{{localize "FORJA.Level"}} {{this.system.level}}</span>
            {{/if}}
          </li>
        {{/each}}
      </ul>
    </div>
  {{/if}}

  {{!-- Weapons (natural attacks) --}}
  {{#if weapons.length}}
    <div class="forja-animal-section">
      <h3 class="forja-section-heading">{{localize "FORJA.Weapons"}}</h3>
      <ul class="forja-weapons__list-compact">
        {{#each weapons}}
          <li class="forja-weapons__compact-item" data-item-id="{{this.id}}">
            <span class="forja-weapons__name">{{this.name}}</span>
            <span class="forja-weapons__damage">{{this.system.damage}}</span>
            <button type="button" class="forja-weapons__roll-btn" data-action="rollAttack"
                    title="{{localize 'FORJA.RollAttack'}}">
              <i class="fas fa-dice-d10"></i>
            </button>
          </li>
        {{/each}}
      </ul>
    </div>
  {{/if}}

  {{!-- Wound/fatigue tracker --}}
  <div class="forja-animal-section">
    <div class="forja-trackers">
      <div class="forja-tracker forja-tracker--wounds">
        <span class="forja-tracker__label">{{localize "FORJA.Health.Wounds"}}</span>
        <div class="forja-tracker__controls">
          <button type="button" class="forja-tracker__btn" data-action="adjustTracker" data-tracker="wounds" data-delta="-1">
            <i class="fas fa-minus"></i>
          </button>
          <span class="forja-tracker__value">
            {{system.health.wounds.value}} / {{system.health.wounds.max}}
          </span>
          <button type="button" class="forja-tracker__btn" data-action="adjustTracker" data-tracker="wounds" data-delta="1">
            <i class="fas fa-plus"></i>
          </button>
        </div>
        <span class="forja-tracker__level forja-tracker__level--{{system.woundLevel}}">
          {{forjaLocalize "FORJA.WoundLevel" system.woundLevel}}
        </span>
      </div>
      <div class="forja-tracker forja-tracker--fatigue">
        <span class="forja-tracker__label">{{localize "FORJA.Health.Fatigue"}}</span>
        <div class="forja-tracker__controls">
          <button type="button" class="forja-tracker__btn" data-action="adjustTracker" data-tracker="fatigue" data-delta="-1">
            <i class="fas fa-minus"></i>
          </button>
          <span class="forja-tracker__value">
            {{system.health.fatigue.value}} / {{system.health.fatigue.max}}
          </span>
          <button type="button" class="forja-tracker__btn" data-action="adjustTracker" data-tracker="fatigue" data-delta="1">
            <i class="fas fa-plus"></i>
          </button>
        </div>
        <span class="forja-tracker__level forja-tracker__level--{{system.fatigueLevel}}">
          {{forjaLocalize "FORJA.FatigueLevel" system.fatigueLevel}}
        </span>
      </div>
    </div>
  </div>
</section>
